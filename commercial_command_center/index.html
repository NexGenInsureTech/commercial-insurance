<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Commercial Insurance Command Center</title>
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Access Control -->
    <script src="js/accessControl.js"></script>
    <script>
      restrict([
        "platformOwner",
        "strategy",
        "underwriting",
        "executive",
        "dataSteward",
      ]);
    </script>
  </head>

  <body class="bg-slate-100 text-slate-900">
    <!-- HEADER -->
    <header class="bg-slate-900 text-white px-8 py-6 flex justify-between">
      <div>
        <h1 class="text-xl font-bold">Commercial Insurance Command Center</h1>
        <p class="text-sm opacity-80">
          Strategy • Portfolio • Underwriting • Distribution • Alerts
        </p>
      </div>

      <div class="text-right text-sm">
        <p id="userInfo"></p>
        <a href="#" onclick="logout()" class="underline opacity-80">
          Switch User
        </a>
      </div>
    </header>

    <!-- MAIN NAVIGATION -->
    <main class="p-8 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
      <!-- ALERTS (TOP PRIORITY) -->
      <a
        href="alerts.html"
        class="bg-red-50 p-6 rounded shadow hover:bg-red-100"
      >
        <h3 class="font-semibold text-red-700">Alerts & Early Warning</h3>
        <p class="text-sm text-slate-600">
          Drift, breaches & intervention signals
        </p>
      </a>

      <!-- EXECUTIVE -->
      <a
        href="executive-dashboard.html"
        class="bg-white p-6 rounded shadow hover:bg-slate-100"
      >
        <h3 class="font-semibold">Executive Dashboard</h3>
        <p class="text-sm text-slate-600">Portfolio health & leadership view</p>
      </a>

      <!-- PORTFOLIO -->
      <a
        href="portfolio.html"
        class="bg-white p-6 rounded shadow hover:bg-slate-100"
      >
        <h3 class="font-semibold">Portfolio Intelligence</h3>
        <p class="text-sm text-slate-600">Loss ratios, capacity & actions</p>
      </a>

      <!-- CLUSTERS -->
      <a
        href="clusters.html"
        class="bg-white p-6 rounded shadow hover:bg-slate-100"
      >
        <h3 class="font-semibold">Cluster Intelligence</h3>
        <p class="text-sm text-slate-600">
          MSME clusters & opportunity mapping
        </p>
      </a>

      <!-- SECTOR PLAYBOOKS -->
      <a
        href="sector-playbooks.html"
        class="bg-white p-6 rounded shadow hover:bg-slate-100"
      >
        <h3 class="font-semibold">Sector Playbooks</h3>
        <p class="text-sm text-slate-600">Risk stacks & insurance bundles</p>
      </a>

      <!-- UNDERWRITING -->
      <a
        href="underwriting.html"
        class="bg-white p-6 rounded shadow hover:bg-slate-100"
      >
        <h3 class="font-semibold">Underwriting Governance</h3>
        <p class="text-sm text-slate-600">Bind / Refer / Decline discipline</p>
      </a>

      <!-- DISTRIBUTION -->
      <a
        href="distribution.html"
        class="bg-white p-6 rounded shadow hover:bg-slate-100"
      >
        <h3 class="font-semibold">Distribution Enablement</h3>
        <p class="text-sm text-slate-600">
          What to sell, how to sell, what to avoid
        </p>
      </a>

      <!-- ADMIN (ROLE-RESTRICTED) -->
      <div id="adminBlock" class="bg-white p-6 rounded shadow hidden">
        <h3 class="font-semibold">Admin & Governance</h3>
        <p class="text-sm text-slate-600 mb-3">
          Data ingestion & strategy controls
        </p>
        <ul class="text-sm list-disc ml-5 space-y-1">
          <li>
            <a href="admin/admin-dashboard.html" class="underline"
              >Admin Home</a
            >
          </li>
          <li>
            <a href="admin/data-upload.html" class="underline">Data Upload</a>
          </li>
          <li>
            <a href="admin/strategy-controls.html" class="underline"
              >Strategy Controls</a
            >
          </li>
        </ul>
      </div>
    </main>

    <footer class="text-center text-xs text-slate-500 py-4">
      Internal System • Governed • Auditable
    </footer>

    <!-- ROLE-AWARE UI -->
    <script>
      const user = sessionStorage.getItem("user");
      const role = sessionStorage.getItem("role");

      document.getElementById("userInfo").innerText =
        user && role ? `User: ${user} | Role: ${role}` : "";

      if (["platformOwner", "strategy", "dataSteward"].includes(role)) {
        document.getElementById("adminBlock").classList.remove("hidden");
      }

      function logout() {
        sessionStorage.clear();
        window.location.href = "auth/login.html";
      }
    </script>
  </body>
</html>
